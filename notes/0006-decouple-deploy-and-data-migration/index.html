<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>DB migration antipatterns | Mykola on Web</title>
<link rel=stylesheet href=/css/main.min.8527fda40cb144faaf163b65742dd799ff9304c5d947777de5ebe9c9348bd346.css integrity="sha256-hSf9pAyxRPqvFjtldC3Xmf+TBMXZR3d95evpyTSL00Y=" crossorigin=anonymous><script src=/js/main.23cd0c7d837263b9eaeb96ee2d9ccfa2969daa3fa00fa1c1fe8701a9b87251a1.js integrity="sha256-I80MfYNyY7nq65buLZzPopadqj+gD6HB/ocBqbhyUaE=" crossorigin=anonymous></script></head><body><header><h1><a href=/>Mykola on Web</a></h1><nav><ul><li><a href=/about/>about me</a></li><li><a href=/talks/>talks</a></li><li><a href=/notes/>notes</a></li></ul></nav></header><main><h1>DB migration antipatterns</h1><blockquote><p>Attention, Attention! The acme-miro service is not responding on production! The outage started with a new version deployment. There was a database change involved. All was good and perfectly tested on staging environments. On production, a database migration is stuck for unknown reasons under investigation ðŸ”¥</p></blockquote><p>It&rsquo;s very common and frankly, quite convenient to apply database modifications during deployment. Think of Liquibase or Flyway for JVM. There are huge benefits of this coupling - and I would definitely recommend it by default - but there are also important pitfalls to remember.</p><h3 id=backwards-incompatibility>Backwards incompatibility.</h3><h3 id=data-migrations>Data migrations</h3><p>delays + backwards incompatibility + health alerts</p><h3 id=long-running>Long running</h3><p>beware table locking</p><h3 id=deploying-with-downtime>Deploying with downtime</h3><p>Is a valid option, but can slow you down.</p><h3 id=no-sql-databases>no-sql databases</h3><p>Tend to be less strict.</p><p class=text_align_right>since
<time datetime=2025-02-08T15:13:49+01:00>February 8, 2025</time></p></main><footer><p>Anno 2025</p></footer></body></html>